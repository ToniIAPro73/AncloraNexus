<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Anclora Test Generator">
    <title>Manual Técnico - Sistema de Conversión de Archivos</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        h1, h2, h3 { color: #333; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
        pre { background-color: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto; }
        .metadata { font-size: 0.8em; color: #666; border-top: 1px solid #eee; padding-top: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="content">
        # MANUAL TÉCNICO<br>## Sistema de Conversión de Archivos v2.1<br><br>### Introducción<br><br>Este manual describe la implementación técnica del sistema de conversión de archivos, incluyendo arquitectura, APIs y procedimientos de mantenimiento.<br><br>### Arquitectura del Sistema<br><br>```<br>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐<br>│   Frontend      │    │   API Gateway   │    │   Conversion    │<br>│   (React)       │◄──►│   (Node.js)     │◄──►│   Engine        │<br>└─────────────────┘    └─────────────────┘    └─────────────────┘<br>         │                       │                       │<br>         ▼                       ▼                       ▼<br>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐<br>│   Auth Service  │    │   File Storage  │    │   Queue System  │<br>│   (Supabase)    │    │   (S3/Local)    │    │   (Redis)       │<br>└─────────────────┘    └─────────────────┘    └─────────────────┘<br>```<br><br>### Componentes Principales<br><br>#### 1. Motor de Conversión<br><br><strong>Ubicación</strong>: `/utils/conversionEngine.ts`<br><br><strong>Funciones principales</strong>:<br>- `findConversionPath(source, target)`: Encuentra ruta óptima<br>- `bfs(start, goal)`: Algoritmo de búsqueda en anchura<br>- `canConvert(source, target)`: Valida posibilidad de conversión<br><br><strong>Ejemplo de uso</strong>:<br>```typescript<br>import { findConversionPath } from './utils/conversionEngine';<br><br>const result = findConversionPath('docx', 'pdf');<br>// Resultado: { optimal: true, path: ['docx', 'pdf'] }<br>```<br><br>#### 2. Matriz de Conversiones<br><br><strong>Conversiones Intra-categoría</strong>:<br>- Documentos: PDF ↔ DOCX ↔ TXT ↔ HTML<br>- Imágenes: JPG ↔ PNG ↔ WebP ↔ GIF<br>- Audio: MP3 ↔ WAV ↔ FLAC<br>- Video: MP4 ↔ AVI ↔ WebM<br><br><strong>Conversiones Inter-categoría</strong>:<br>- Imagen → Documento: JPG/PNG → PDF<br>- Audio → Video: MP3/WAV → MP4 (con imagen estática)<br>- Video → Audio: MP4/AVI → MP3/WAV (extracción)<br><br>### APIs Disponibles<br><br>#### POST /api/convert<br>Inicia proceso de conversión<br><br><strong>Parámetros</strong>:<br>```json<br>{<br>  "sourceFile": "document.docx",<br>  "targetFormat": "pdf",<br>  "options": {<br>    "quality": "high",<br>    "compression": false<br>  }<br>}<br>```<br><br><strong>Respuesta</strong>:<br>```json<br>{<br>  "jobId": "conv_123456",<br>  "status": "processing",<br>  "estimatedTime": 30,<br>  "path": ["docx", "pdf"]<br>}<br>```<br><br>#### GET /api/convert/:jobId<br>Consulta estado de conversión<br><br><strong>Respuesta</strong>:<br>```json<br>{<br>  "jobId": "conv_123456",<br>  "status": "completed",<br>  "progress": 100,<br>  "downloadUrl": "/downloads/document.pdf",<br>  "processingTime": 28<br>}<br>```<br><br>### Configuración de Desarrollo<br><br>#### Requisitos del Sistema<br>- Node.js 18+<br>- npm 8+<br>- 4GB RAM mínimo<br>- 10GB espacio libre<br><br>#### Variables de Entorno<br>```bash<br># Base de datos<br>SUPABASE_URL=https://your-project.supabase.co<br>SUPABASE_ANON_KEY=your-anon-key<br><br># Almacenamiento<br>STORAGE_TYPE=local|s3<br>AWS_BUCKET_NAME=conversions-bucket<br><br># Conversión<br>MAX_FILE_SIZE=50MB<br>CONCURRENT_JOBS=3<br>TIMEOUT_SECONDS=300<br>```<br><br>#### Instalación<br>```bash<br># Clonar repositorio<br>git clone https://github.com/user/anclora-converter.git<br>cd anclora-converter<br><br># Instalar dependencias<br>npm install<br><br># Configurar entorno<br>cp .env.example .env<br># Editar .env con tus valores<br><br># Ejecutar en desarrollo<br>npm run dev<br>```<br><br>### Procedimientos de Mantenimiento<br><br>#### Limpieza de Archivos Temporales<br>```bash<br># Ejecutar diariamente<br>npm run cleanup:temp<br><br># Limpiar archivos > 24h<br>find ./temp -type f -mtime +1 -delete<br>```<br><br>#### Monitoreo de Performance<br>```bash<br># Ver estadísticas de conversión<br>npm run stats:conversion<br><br># Monitorear uso de memoria<br>npm run monitor:memory<br>```<br><br>#### Backup de Configuración<br>```bash<br># Backup semanal<br>npm run backup:config<br>tar -czf config-backup-$(date +%Y%m%d).tar.gz config/<br>```<br><br>### Solución de Problemas<br><br>#### Error: "Conversion timeout"<br><strong>Causa</strong>: Archivo muy grande o proceso bloqueado<br><strong>Solución</strong>: <br>1. Verificar tamaño de archivo (máx 50MB)<br>2. Reiniciar worker de conversión<br>3. Aumentar timeout en configuración<br><br>#### Error: "Format not supported"<br><strong>Causa</strong>: Formato no incluido en matriz de conversión<br><strong>Solución</strong>:<br>1. Verificar extensión de archivo<br>2. Actualizar matriz en `conversionMaps.ts`<br>3. Implementar convertidor específico<br><br>#### Error: "Memory limit exceeded"<br><strong>Causa</strong>: Conversión de archivo muy grande<br><strong>Solución</strong>:<br>1. Implementar procesamiento por chunks<br>2. Aumentar límite de memoria<br>3. Usar conversión asíncrona<br><br>### Métricas y Logging<br><br>#### Métricas Clave<br>- Tiempo promedio de conversión por formato<br>- Tasa de éxito por tipo de conversión<br>- Uso de memoria y CPU<br>- Errores por categoría<br><br>#### Configuración de Logs<br>```javascript<br>// logger.config.js<br>module.exports = {<br>  level: 'info',<br>  format: 'json',<br>  transports: [<br>    { type: 'file', filename: 'conversion.log' },<br>    { type: 'console', colorize: true }<br>  ]<br>};<br>```<br><br>### Seguridad<br><br>#### Validación de Archivos<br>- Verificación de tipo MIME<br>- Escaneo de malware<br>- Límites de tamaño<br>- Sanitización de nombres<br><br>#### Autenticación<br>- JWT tokens con expiración<br>- Rate limiting por usuario<br>- Validación de permisos por operación<br><br>---<br>*Manual actualizado: 13/7/2025*<br>*Versión: 2.1.0*
    </div>
    <div class="metadata">
        <p><strong>Documento generado para testing</strong></p>
        <p>Fecha: 13/7/2025, 19:56:44</p>
        <p>Formato: HTML5</p>
        <p>Encoding: UTF-8</p>
    </div>
</body>
</html>